<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡πÄ‡∏Å‡∏° ‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏¢‡πÉ‡∏à v2.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ CSS ‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/screens.css">
    <link rel="stylesheet" href="css/utilities.css">
</head>
<body>

    <!-- Screen 1: Splash Screen -->
    <div id="splash-screen" class="game-screen show">
        <div class="splash-content">
            <h1 class="splash-title">‡πÄ‡∏Å‡∏°<br>‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏¢‡πÉ‡∏à <span class="version-tag">v2.0</span></h1>
            <div class="instructions">
                <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
                <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á!</p>
                <ol>
                    <li><strong>‡πÇ‡∏´‡∏°‡∏î‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤:</strong> ‡∏ñ‡∏∂‡∏á‡∏ï‡∏≤‡πÉ‡∏Ñ‡∏£ ‡∏Ñ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î "‡∏£‡∏∏‡∏°‡∏ó‡∏≤‡∏¢" ‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö 4 ‡∏´‡∏•‡∏±‡∏Å ‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞!</li>
                    <li><strong>‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏±‡∏ô‡∏™‡πå‡πÇ‡∏Ñ‡∏ï‡∏£:</strong> ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏ó‡∏≥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ñ‡∏π‡∏Å‡∏ó‡∏≤‡∏¢‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≤!</li>
                </ol>
                <p class="start-prompt">(‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠)</p>
            </div>
        </div>
    </div>

    <!-- Screen 2: Lobby Screen -->
    <div id="lobby-screen" class="game-screen">
        <div class="lobby-container">
            <div class="lobby-box">
                <h2 class="lobby-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h2>
                <p class="lobby-description">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô</p>
                <button id="go-to-create-btn" class="lobby-button">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á</button>
            </div>
            <div class="lobby-box">
                <h2 class="lobby-title">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</h2>
                <p class="lobby-description">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</p>
                <button id="go-to-join-btn" class="lobby-button">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
            </div>
        </div>
    </div>

    <!-- Screen 3: Create Room Setup Screen -->
    <div id="create-room-screen" class="game-screen">
        <div class="lobby-container">
            <div class="lobby-box">
                <h2 class="lobby-title">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                <input type="text" id="host-name-input" class="lobby-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" maxlength="12">
                <input type="text" id="new-room-name-input" class="lobby-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏π‡πà)" maxlength="20">
                <input type="password" id="new-room-password-input" class="lobby-input" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)" maxlength="4" inputmode="numeric">
                <div class="mode-selection-container">
                    <h3 class="mode-selection-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h3>
                    <div class="mode-options">
                        <button class="mode-option-btn" data-mode="normal">
                            <h4>‡πÇ‡∏´‡∏°‡∏î‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</h4>
                            <p>‡∏£‡∏∏‡∏°‡∏ó‡∏≤‡∏¢‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏£‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</p>
                        </button>
                        <button class="mode-option-btn" data-mode="arcade">
                            <h4>‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏±‡∏ô‡∏™‡πå‡πÇ‡∏Ñ‡∏ï‡∏£</h4>
                            <p>‡∏£‡∏∏‡∏°‡∏ó‡∏≤‡∏¢‡∏ó‡∏≥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</p>
                        </button>
                    </div>
                </div>
                <button id="confirm-create-btn" class="lobby-button" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á</button>
            </div>
        </div>
    </div>

    <!-- Screen 4: Room List Screen -->
    <div id="room-list-screen" class="game-screen">
        <div class="room-list-container">
            <h2 class="room-list-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà</h2>
            <div id="room-list-content">
                <p class="no-rooms-message">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ...</p>
            </div>
        </div>
    </div>

    <!-- Screen 4.5: Joiner Setup Screen -->
    <div id="joiner-setup-screen" class="game-screen">
        <div class="lobby-container">
            <div class="lobby-box">
                <h2 class="lobby-title">‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                <p class="lobby-description">‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á <strong id="joiner-room-name-display"></strong></p>
                <input type="text" id="joiner-name-input" class="lobby-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" maxlength="12">
                <button id="confirm-join-btn" class="lobby-button">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
            </div>
        </div>
    </div>

    <!-- Screen 5: Waiting Room Screen -->
    <div id="waiting-room-screen" class="game-screen">
        <div class="waiting-room-container">
            <h2 class="waiting-room-title">‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô</h2>
            <p class="room-code-display">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á: <span id="room-code-text">----</span></p>
            <div class="player-list">
                <div class="player-slot" id="player1-slot"><div class="player-avatar-initial">?</div><span class="player-name">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1</span><span class="player-status waiting">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...</span></div>
                <div class="player-slot" id="player2-slot"><div class="player-avatar-initial">?</div><span class="player-name">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 2</span><span class="player-status waiting">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...</span></div>
                <div class="player-slot" id="player3-slot"><div class="player-avatar-initial">?</div><span class="player-name">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 3</span><span class="player-status waiting">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...</span></div>
                <div class="player-slot" id="player4-slot"><div class="player-avatar-initial">?</div><span class="player-name">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 4</span><span class="player-status waiting">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...</span></div>
            </div>
            <p id="waiting-message" class="waiting-message">‡πÅ‡∏ä‡∏£‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì!</p>
            <button id="start-game-btn" class="lobby-button" disabled>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        </div>
    </div>

    <!-- Screen 6: Main Game Screen -->
    <div id="main-game-screen" class="game-screen">
        <div id="turn-indicator" class="turn-indicator">
            <span id="turn-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...</span>
            <span id="turn-timer-display"></span>
        </div>
        <div class="main-container">
            <!-- Arcade Mode UI (‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏î‡∏¢ JS) -->
            <div id="scoreboard-section" class="section arcade-only">
                <h2 class="section-title">üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h2>
                <div id="scoreboard-content"></div>
            </div>
            <div id="card-display-section" class="section arcade-only">
                <h2 class="section-title">üÉè ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h2>
                <div id="card-content">
                    <p class="no-card-text">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î</p>
                </div>
            </div>

            <!-- Common UI -->
            <div class="section"><h2 class="section-title">‚≠ê ‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2><div id="our-number-display" class="input-container"></div></div>
            <div class="section"><h2 class="section-title">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢ (<span id="history-target-name"></span>)</h2><div id="history-log" class="history-log"></div></div>
            <div class="section guess-controls">
                <h2 class="section-title">‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç / ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</h2>
                <div id="guess-number-container" class="input-container"><div class="number-input"></div><div class="number-input"></div><div class="number-input"></div><div class="number-input"></div></div>
                <div id="number-pad-container" class="number-grid"></div>
            </div>
            <div class="final-answer-section">
                <div class="final-answer-chances">‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ï‡∏≠‡∏ö: <span id="chance-1" class="chance-dot"></span><span id="chance-2" class="chance-dot"></span><span id="chance-3" class="chance-dot"></span></div>
                <button id="submit-final-answer-btn" class="final-answer-button">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</button>
            </div>
        </div>
        <div id="spectator-overlay" class="spectator-overlay"><div id="spectator-message" class="spectator-message">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏û‡πâ‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏°...</div></div>
    </div>

    <!-- Screen 7: Game Over Screen -->
    <div id="game-over-screen" class="game-screen">
        <div class="game-over-container">
            <h1 id="game-over-title" class="game-over-title">‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞!</h1>
            <h2 id="winner-name" class="winner-name"></h2>
            <p id="game-over-message" class="game-over-message"></p>
            <!-- Arcade Mode UI -->
            <div id="final-scores-container" class="arcade-only"></div>
            <!-- Common UI -->
            <div class="game-over-numbers" id="game-over-numbers-container"></div>
            <div class="game-over-buttons">
                <button id="rematch-btn" class="lobby-button">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
                <button id="back-to-lobby-btn" class="lobby-button secondary">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Modals and Toasts -->
    <div id="password-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡πâ‡∏≠‡∏á</h3>
            <p id="password-modal-room-name"></p>
            <input type="password" id="password-modal-input" class="lobby-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç" maxlength="4" inputmode="numeric">
            <button id="password-modal-submit-btn" class="lobby-button">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>
    </div>
    <div id="toast" class="toast-notification"></div>
    <div id="action-toast" class="action-toast"><p id="action-toast-text"></p></div>

    <!-- Sound Control Button -->
    <div id="sound-control" class="sound-control"><span id="sound-icon">üîä</span></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <!-- Main Game Script -->
    <script type="module" src="js/main.js"></script>

</body>
</html>
